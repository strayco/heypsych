// generate-treatments.js (ESM)
import { mkdir, writeFile } from "fs/promises";
import path from "path";
import { fileURLToPath } from "url";

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// If you prefer to keep the data in this file, leave it here.
// Otherwise, see the JSON-driven variant below.
const structure = {
  interventional: [
    "transcranial-magnetic-stimulation.json",
    "electroconvulsive-therapy.json",
    "vagus-nerve-stimulation.json",
    "deep-brain-stimulation.json",
    "transcranial-direct-current-stimulation.json",
    "transcranial-focused-ultrasound.json",
    "epidural-stimulation.json",
    "spinal-cord-stimulation.json",
    "peripheral-nerve-stimulation.json",
    "magnetic-seizure-therapy.json",
    "low-field-magnetic-stimulation.json",
    "transcranial-ultrasound.json",
    "iv-ketamine-infusion.json",
    "spravato-esketamine.json",
    "ketamine-assisted-psychotherapy.json",
    "nitrous-oxide-therapy.json",
    "xenon-therapy.json",
    "bright-light-therapy.json",
    "dawn-simulation-therapy.json",
    "red-light-therapy.json",
    "blue-light-therapy.json",
    "infrared-light-therapy.json",
    "photobiomodulation.json",
    "seasonal-affective-disorder-lamp.json",
    "eeg-neurofeedback.json",
    "real-time-fmri-neurofeedback.json",
    "heart-rate-variability-training.json",
    "alpha-theta-neurofeedback.json",
    "smr-neurofeedback.json",
    "beta-neurofeedback.json",
    "gamma-neurofeedback.json",
    "coherence-training.json",
    "biofeedback-emg.json",
    "biofeedback-thermal.json",
    "biofeedback-galvanic-skin-response.json"
  ],
  investigational: [
    "psilocybin-therapy.json",
    "mdma-assisted-psychotherapy.json",
    "lsd-therapy.json",
    "ayahuasca-therapy.json",
    "dmt-therapy.json",
    "mescaline-therapy.json",
    "ibogaine-therapy.json",
    "5-meo-dmt-therapy.json",
    "brexanolone-zulresso.json",
    "zuranolone.json",
    "sage-217.json",
    "experimental-glutamate-modulators.json",
    "nmda-antagonists.json",
    "ampa-modulators.json",
    "novel-antidepressants.json",
    "triple-reuptake-inhibitors.json",
    "multimodal-antidepressants.json",
    "experimental-gene-therapy.json",
    "crispr-mental-health.json",
    "viral-vector-gene-therapy.json",
    "closed-loop-neurostimulation.json",
    "brain-computer-interfaces.json",
    "focused-ultrasound.json",
    "optogenetics.json",
    "chemogenetics.json"
  ],
  therapy: [
    "cognitive-behavioral-therapy.json",
    "dialectical-behavior-therapy.json",
    "acceptance-commitment-therapy.json",
    "mindfulness-based-cognitive-therapy.json",
    "mindfulness-based-stress-reduction.json",
    "rational-emotive-behavior-therapy.json",
    "cognitive-processing-therapy.json",
    "behavioral-activation.json",
    "exposure-response-prevention.json",
    "emdr.json",
    "trauma-focused-cbt.json",
    "somatic-experiencing.json",
    "prolonged-exposure-therapy.json",
    "cognitive-therapy-ptsd.json",
    "narrative-exposure-therapy.json",
    "accelerated-resolution-therapy.json",
    "brainspotting.json",
    "havening-techniques.json",
    "psychoanalysis.json",
    "brief-dynamic-therapy.json",
    "object-relations-therapy.json",
    "interpersonal-therapy.json",
    "short-term-dynamic-therapy.json",
    "mentalization-based-therapy.json",
    "transference-focused-therapy.json",
    "person-centered-therapy.json",
    "gestalt-therapy.json",
    "existential-therapy.json",
    "logotherapy.json",
    "reality-therapy.json",
    "solution-focused-brief-therapy.json",
    "narrative-therapy.json",
    "family-therapy.json",
    "couples-therapy.json",
    "gottman-method.json",
    "emotionally-focused-therapy.json",
    "structural-family-therapy.json",
    "strategic-family-therapy.json",
    "bowen-family-systems.json",
    "multisystemic-therapy.json",
    "functional-family-therapy.json",
    "multidimensional-family-therapy.json",
    "brief-strategic-family-therapy.json",
    "attachment-based-family-therapy.json",
    "group-therapy.json",
    "process-groups.json",
    "support-groups.json",
    "psychoeducational-groups.json",
    "skills-training-groups.json",
    "parent-child-interaction-therapy.json",
    "triple-p-positive-parenting.json",
    "incredible-years.json",
    "parent-management-training.json",
    "behavioral-parent-training.json",
    "multisystemic-therapy-families.json",
    "multidimensional-treatment-foster-care.json",
    "therapeutic-foster-care.json",
    "wraparound-services.json",
    "family-preservation-services.json",
    "intensive-family-services.json",
    "home-based-family-therapy.json",
    "brief-strategic-family-therapy-parenting.json",
    "functional-family-therapy-parenting.json",
    "attachment-based-family-therapy-parenting.json",
    "child-parent-psychotherapy.json",
    "trauma-focused-family-therapy.json",
    "play-therapy-family.json",
    "filial-therapy.json",
    "theraplay.json",
    "dir-floortime.json",
    "relationship-development-intervention.json",
    "parent-infant-psychotherapy.json",
    "watch-wait-wonder.json",
    "video-interaction-guidance.json",
    "newborn-behavioral-observations.json",
    "brazelton-touchpoints.json",
    "strengthening-families-program.json",
    "families-schools-together.json",
    "chicago-parent-program.json",
    "anos-family-approach.json",
    "love-and-logic.json",
    "1-2-3-magic.json",
    "conscious-discipline.json",
    "positive-discipline.json",
    "gentle-parenting.json",
    "authoritative-parenting-training.json",
    "emotion-coaching.json",
    "collaborative-problem-solving.json",
    "explosive-child-approach.json"
  ],
  alternative: [
    "acupuncture.json",
    "electroacupuncture.json",
    "auricular-acupuncture.json",
    "traditional-chinese-medicine.json",
    "herbal-chinese-medicine.json",
    "ayurveda.json",
    "ayurvedic-herbs.json",
    "homeopathy.json",
    "naturopathy.json",
    "chiropractic-care.json",
    "osteopathic-manipulation.json",
    "massage-therapy.json",
    "swedish-massage.json",
    "deep-tissue-massage.json",
    "trigger-point-therapy.json",
    "myofascial-release.json",
    "craniosacral-therapy.json",
    "rolfing.json",
    "alexander-technique.json",
    "feldenkrais-method.json",
    "reiki.json",
    "therapeutic-touch.json",
    "chakra-balancing.json",
    "crystal-healing.json",
    "sound-therapy.json",
    "music-therapy.json",
    "vibroacoustic-therapy.json",
    "binaural-beats.json",
    "singing-bowl-therapy.json",
    "art-therapy.json",
    "expressive-arts-therapy.json",
    "dance-movement-therapy.json",
    "drama-therapy.json",
    "poetry-therapy.json",
    "bibliotherapy.json",
    "horticultural-therapy.json",
    "animal-assisted-therapy.json",
    "equine-assisted-therapy.json",
    "dolphin-assisted-therapy.json",
    "wilderness-therapy.json",
    "adventure-therapy.json",
    "recreational-therapy.json",
    "occupational-therapy.json",
    "sensory-integration-therapy.json",
    "holotropic-breathwork.json",
    "wim-hof-method.json",
    "pranayama.json",
    "box-breathing.json",
    "4-7-8-breathing.json",
    "alternate-nostril-breathing.json",
    "breath-of-fire.json",
    "coherent-breathing.json",
    "transformational-breath.json",
    "rebirthing-breathwork.json",
    "yoga-therapy.json",
    "kundalini-yoga.json",
    "yin-yoga.json",
    "restorative-yoga.json",
    "tai-chi.json",
    "qigong.json",
    "meditation.json",
    "mindfulness-meditation.json",
    "loving-kindness-meditation.json",
    "body-scan-meditation.json",
    "walking-meditation.json",
    "transcendental-meditation.json",
    "vipassana-meditation.json",
    "zen-meditation.json",
    "progressive-muscle-relaxation.json",
    "autogenic-training.json",
    "guided-imagery.json",
    "visualization-therapy.json",
    "hypnotherapy.json",
    "clinical-hypnosis.json",
    "self-hypnosis.json",
    "ericksonian-hypnosis.json"
  ],
  supplements: [
    "5-htp.json",
    "l-theanine.json",
    "tryptophan.json",
    "tyrosine.json",
    "phenylalanine.json",
    "gaba-supplement.json",
    "taurine.json",
    "glycine.json",
    "glutamine.json",
    "carnitine.json",
    "creatine.json",
    "vitamin-d.json",
    "vitamin-d3.json",
    "vitamin-b1-thiamine.json",
    "vitamin-b2-riboflavin.json",
    "vitamin-b3-niacin.json",
    "vitamin-b5-pantothenic-acid.json",
    "vitamin-b6-pyridoxine.json",
    "vitamin-b7-biotin.json",
    "vitamin-b9-folate.json",
    "vitamin-b12-cobalamin.json",
    "b-complex.json",
    "vitamin-c.json",
    "vitamin-e.json",
    "vitamin-k.json",
    "magnesium.json",
    "magnesium-glycinate.json",
    "magnesium-threonate.json",
    "magnesium-taurate.json",
    "zinc.json",
    "iron.json",
    "selenium.json",
    "chromium.json",
    "lithium-orotate.json",
    "calcium.json",
    "potassium.json",
    "phosphorus.json",
    "fish-oil.json",
    "krill-oil.json",
    "algae-omega-3.json",
    "flax-seed-oil.json",
    "evening-primrose-oil.json",
    "borage-oil.json",
    "black-currant-oil.json",
    "st-johns-wort.json",
    "ashwagandha.json",
    "rhodiola.json",
    "ginkgo-biloba.json",
    "ginseng.json",
    "panax-ginseng.json",
    "american-ginseng.json",
    "siberian-ginseng.json",
    "bacopa-monnieri.json",
    "lion-mane-mushroom.json",
    "reishi-mushroom.json",
    "cordyceps.json",
    "chaga-mushroom.json",
    "turkey-tail-mushroom.json",
    "valerian-root.json",
    "passionflower.json",
    "kava.json",
    "lemon-balm.json",
    "chamomile.json",
    "lavender.json",
    "hops.json",
    "skullcap.json",
    "california-poppy.json",
    "jujube.json",
    "magnolia-bark.json",
    "phosphatidylserine.json",
    "phosphatidylcholine.json",
    "alpha-gpc.json",
    "citicoline.json",
    "acetyl-l-carnitine.json",
    "coq10.json",
    "nad-precursors.json",
    "resveratrol.json",
    "curcumin.json",
    "quercetin.json",
    "green-tea-extract.json",
    "grape-seed-extract.json",
    "milk-thistle.json",
    "saw-palmetto.json",
    "lactobacillus-helveticus.json",
    "lactobacillus-rhamnosus.json",
    "bifidobacterium-longum.json",
    "bifidobacterium-breve.json",
    "multi-strain-probiotics.json",
    "prebiotic-fiber.json",
    "digestive-enzymes.json",
    "betaine-hcl.json",
    "melatonin.json",
    "melatonin-extended-release.json"
  ]
};

const baseDir = path.join(__dirname, "data", "treatments");

async function run() {
  for (const [category, files] of Object.entries(structure)) {
    const categoryDir = path.join(baseDir, category);
    await mkdir(categoryDir, { recursive: true });

    await Promise.all(
      files.map(async (file) => {
        const filePath = path.join(categoryDir, file);
        // Write empty JSON object only if file doesn't already exist
        await writeFile(filePath, "{}", { flag: "wx" }).catch((err) => {
          if (err.code !== "EEXIST") throw err;
        });
      })
    );
  }
  console.log("All treatment files created!");
}

run().catch((e) => {
  console.error(e);
  process.exit(1);
});
